<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.hstc.recommend.dao.RoleDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="cn.hstc.recommend.entity.RoleEntity" id="roleMap">
        <result property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="parentId" column="parent_id"/>
        <result property="createId" column="create_id"/>
        <result property="remark" column="remark"/>
        <result property="createTime" column="create_time"/>
    </resultMap>

    <select id="selectAllRole" resultMap="roleMap">
        select r.id,r.name,r.parent_id,r.create_id,r.remark,r.create_time,u.user_name as createName
        ,r2.name as parentName
        from role r
        left join user u on u.id = r.create_id
        left join role r2 on r.parent_id = r2.id
        <where>
            ${ew.sqlSegment}
        </where>
    </select>

</mapper>